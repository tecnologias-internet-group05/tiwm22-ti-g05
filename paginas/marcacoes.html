<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>ZooParadise - Marcações</title>
        <link rel="icon" type="image/x-icon" href="/imagens/favicon.ico">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="/css/style.css">
        <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
        <script src="https://kit.fontawesome.com/a54d2cbf95.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <nav>
            <div class="logo">
                <a href="/paginas/index.html"><img src="/imagens/zoologo.svg" alt="logo"></a>
            </div>
            <div class="toggle">
                <a href="#"><ion-icon name="menu-outline"></ion-icon></a>
            </div>
            <ul class="menu">
                <li><a href="/paginas/index.html">Início</a></li>
                <li><a href="/paginas/animais.html">Animais</a></li>
                <li><a href="/paginas/marcacoes.html" class="isactive">Marcações</a></li>
                <li><a href="/paginas/sobre.html">Sobre Nós</a></li>
                <li><a href="/paginas/contactos.html">Contactos</a></li>
            </ul>
        </nav>
        <marquee bgcolor="yellowgreen" direction="left">NOVIDADE! DESCONTOS ATÉ 20% EM TODOS OS BILHETES!</marquee>
        <a href="#" class="top-arrow">
            <i class="fas fa-chevron-up"></i>
        </a>
        <br>
        <br>
        <h1 class="align">Bilheteira</h1>     
        <br> 
        <table class="prices">
            <tr>
                <th> Bilhete </th>
                <th> <span id="A_Bilhete"></span> </th>
                <th> <span id="C_Bilhete"></span> </th>
                <th> <span id="S_Bilhete"></span> </th>
            </tr>
            <tr>
                <th> Idades </th>
                <td> De <span id="A_Min"></span> a <span id="A_Max"></span> anos. </td>
                <td> De <span id="C_Min"></span> a <span id="C_Max"></span> anos. </td>
                <td> Acima de <span id="S_Min"></span> anos. </td>
            </tr>
            <tr>
                <th> Preço Dias Úteis </th>
                <td> <span id="A_Preco"></span><span id="A_Unidade"></span> </td>
                <td> <span id="C_Preco"></span><span id="C_Unidade"></span> </td>
                <td> <span id="S_Preco"></span><span id="S_Unidade"></span> </td>
            </tr>
            <tr>
                <th> Preço Fim-de-Semana </th>
                <td> <span id="A_PrecoF"></span><span id="A_UnidadeF"></span> </td>
                <td> <span id="C_PrecoF"></span><span id="C_UnidadeF"></span> </td>
                <td> <span id="S_PrecoF"></span><span id="S_UnidadeF"></span> </td>
            </tr>
        </table>

        <br>
        <br>
        <br>

        <h1 class="align">Horário de Funcionamento</h1>
        <br>
        <table class="prices">
            <tr>
                <th> 2ª Feira </th>
                <th> 10:00 </th>
                <th> 18:00 </th>
            </tr>
            <tr>
                <th>3ª Feira-6ª Feira</th>
                <th> 11:00 </th>
                <th> 19:00 </th>
            </tr>
            <tr>
                <th>Sábado</th>
                <th> 09:00 </th>
                <th> 17:00 </th>
            </tr>
            <tr>
                <th> Domingo </th>
                <th> 08:00 </th>
                <th> 16:00 </th>
            </tr>
        </table>

        <br>
        <br>

        <script>
            var parser, xmlDoc;
            txt = "<Zoo><Bilhete>" +
                  "<Tipo> Adulto </Tipo>" +
                  "<Idade>" +
                  "<Idade_Min> 16 </Idade_Min>" +
                  "<Idade_Max> 64 </Idade_Max>" +
                  "</Idade>" +
                  "<Preco><Semana>" +
                  "<Total> 19.99 </Total>" +
                  "</Semana><Fim_Semana>" +
                  "<Total> 15.99 </Total>" +
                  "</Fim_Semana>" +
                  "<Unidade_Monetaria> € </Unidade_Monetaria>" +
                  "</Preco></Bilhete>" +
                  "<Bilhete>" +
                  "<Tipo> Criança </Tipo>" +
                  "<Idade>" +
                  "<Idade_Min> 3 </Idade_Min>" +
                  "<Idade_Max> 15 </Idade_Max>" +
                  "</Idade>" +
                  "<Preco><Semana>" +
                  "<Total> 10.99 </Total>" +
                  "</Semana><Fim_Semana>" +
                  "<Total> 7.99 </Total>" +
                  "</Fim_Semana>" +
                  "<Unidade_Monetaria> € </Unidade_Monetaria>" +
                  "</Preco>" +
                  "</Bilhete>" +
                  "<Bilhete>" +
                  "<Tipo> Sénior </Tipo>" +
                  "<Idade>" +
                  "<Idade_Min> 65 </Idade_Min>" +
                  "</Idade>" +
                  "<Preco><Semana>" +
                  "<Total> 15.99 </Total>" +
                  "</Semana><Fim_Semana>" +
                  "<Total> 12.99 </Total>" +
                  "</Fim_Semana>" +
                  "<Unidade_Monetaria> € </Unidade_Monetaria>" +
                  "</Preco>" +
                  "</Bilhete></Zoo>";
            
            parser = new DOMParser();
            xmlDoc = parser.parseFromString(txt,"text/xml");
            
            // Adulto
            document.getElementById("A_Bilhete").innerHTML =
            xmlDoc.getElementsByTagName("Tipo")[0].childNodes[0].nodeValue;
            document.getElementById("A_Min").innerHTML =
            xmlDoc.getElementsByTagName("Idade_Min")[0].childNodes[0].nodeValue;
            document.getElementById("A_Max").innerHTML =
            xmlDoc.getElementsByTagName("Idade_Max")[0].childNodes[0].nodeValue;
            document.getElementById("A_Preco").innerHTML =
            xmlDoc.getElementsByTagName("Total")[0].childNodes[0].nodeValue;
            document.getElementById("A_PrecoF").innerHTML =
            xmlDoc.getElementsByTagName("Total")[1].childNodes[0].nodeValue;
            document.getElementById("A_Unidade").innerHTML =
            xmlDoc.getElementsByTagName("Unidade_Monetaria")[0].childNodes[0].nodeValue;
            document.getElementById("A_UnidadeF").innerHTML =
            xmlDoc.getElementsByTagName("Unidade_Monetaria")[0].childNodes[0].nodeValue;
            
            // Criança
            document.getElementById("C_Bilhete").innerHTML =
            xmlDoc.getElementsByTagName("Tipo")[1].childNodes[0].nodeValue;
            document.getElementById("C_Min").innerHTML =
            xmlDoc.getElementsByTagName("Idade_Min")[1].childNodes[0].nodeValue;
            document.getElementById("C_Max").innerHTML =
            xmlDoc.getElementsByTagName("Idade_Max")[1].childNodes[0].nodeValue;
            document.getElementById("C_Preco").innerHTML =
            xmlDoc.getElementsByTagName("Total")[2].childNodes[0].nodeValue;
            document.getElementById("C_PrecoF").innerHTML =
            xmlDoc.getElementsByTagName("Total")[3].childNodes[0].nodeValue;
            document.getElementById("C_Unidade").innerHTML =
            xmlDoc.getElementsByTagName("Unidade_Monetaria")[0].childNodes[0].nodeValue;
            document.getElementById("C_UnidadeF").innerHTML =
            xmlDoc.getElementsByTagName("Unidade_Monetaria")[0].childNodes[0].nodeValue;
            
            // Sénior
            document.getElementById("S_Bilhete").innerHTML =
            xmlDoc.getElementsByTagName("Tipo")[2].childNodes[0].nodeValue;
            document.getElementById("S_Min").innerHTML =
            xmlDoc.getElementsByTagName("Idade_Min")[2].childNodes[0].nodeValue;
            document.getElementById("S_Preco").innerHTML =
            xmlDoc.getElementsByTagName("Total")[4].childNodes[0].nodeValue;
            document.getElementById("S_PrecoF").innerHTML =
            xmlDoc.getElementsByTagName("Total")[5].childNodes[0].nodeValue;
            document.getElementById("S_Unidade").innerHTML =
            xmlDoc.getElementsByTagName("Unidade_Monetaria")[2].childNodes[0].nodeValue;
            document.getElementById("S_UnidadeF").innerHTML =
            xmlDoc.getElementsByTagName("Unidade_Monetaria")[2].childNodes[0].nodeValue;
        </script>
        <div id="smart-button-container">
            <div style="text-align: center;">
              <div style="margin-bottom: 1.25rem;">
                <p>O bilhete será enviado por email após compra.</p>
                <select id="item-options"><option value="Adulto - Dia Útil" price="19.99">Adulto - Dia Útil - 19.99 EUR</option><option value="Adulto - Fim-de-Semana" price="15.99">Adulto - Fim-de-Semana - 15.99 EUR</option><option value="Criança - Dia Útil" price="10.99">Criança - Dia Útil - 10.99 EUR</option><option value="Criança - Fim-de-Semana" price="7.99">Criança - Fim-de-Semana - 7.99 EUR</option><option value="Sénior - Dia Útil" price="15.99">Sénior - Dia Útil - 15.99 EUR</option><option value="Sénior - Fim-de-Semana" price="12.99">Sénior - Fim-de-Semana - 12.99 EUR</option></select>
                <select style="visibility: hidden" id="quantitySelect"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option></select>
              </div>
            <div id="paypal-button-container"></div>
            </div>
          </div>
          <script src="https://www.paypal.com/sdk/js?client-id=sb&enable-funding=venmo&currency=EUR" data-sdk-integration-source="button-factory"></script>
          <script>
            function initPayPalButton() {
              var shipping = 0;
              var itemOptions = document.querySelector("#smart-button-container #item-options");
          var quantity = parseInt(5);
          var quantitySelect = document.querySelector("#smart-button-container #quantitySelect");
          if (!isNaN(quantity)) {
            quantitySelect.style.visibility = "visible";
          }
          var orderDescription = 'O bilhete será enviado por email após compra.';
          if(orderDescription === '') {
            orderDescription = 'Item';
          }
          paypal.Buttons({
            style: {
              shape: 'pill',
              color: 'black',
              layout: 'vertical',
              label: 'buynow',
              
            },
            createOrder: function(data, actions) {
              var selectedItemDescription = itemOptions.options[itemOptions.selectedIndex].value;
              var selectedItemPrice = parseFloat(itemOptions.options[itemOptions.selectedIndex].getAttribute("price"));
              var tax = (0 === 0 || false) ? 0 : (selectedItemPrice * (parseFloat(0)/100));
              if(quantitySelect.options.length > 0) {
                quantity = parseInt(quantitySelect.options[quantitySelect.selectedIndex].value);
              } else {
                quantity = 1;
              }
      
              tax *= quantity;
              tax = Math.round(tax * 100) / 100;
              var priceTotal = quantity * selectedItemPrice + parseFloat(shipping) + tax;
              priceTotal = Math.round(priceTotal * 100) / 100;
              var itemTotalValue = Math.round((selectedItemPrice * quantity) * 100) / 100;
      
              return actions.order.create({
                purchase_units: [{
                  description: orderDescription,
                  amount: {
                    currency_code: 'EUR',
                    value: priceTotal,
                    breakdown: {
                      item_total: {
                        currency_code: 'EUR',
                        value: itemTotalValue,
                      },
                      shipping: {
                        currency_code: 'EUR',
                        value: shipping,
                      },
                      tax_total: {
                        currency_code: 'EUR',
                        value: tax,
                      }
                    }
                  },
                  items: [{
                    name: selectedItemDescription,
                    unit_amount: {
                      currency_code: 'EUR',
                      value: selectedItemPrice,
                    },
                    quantity: quantity
                  }]
                }]
              });
            },
            onApprove: function(data, actions) {
              return actions.order.capture().then(function(orderData) {
                
                // Full available details
                console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));
      
                // Show a success message within this page, e.g.
                const element = document.getElementById('paypal-button-container');
                element.innerHTML = '';
                element.innerHTML = '<h3>Obrigado pela sua compra!</h3>';
      
              });
            },
            onError: function(err) {
              console.log(err);
            },
          }).render('#paypal-button-container');
        }
        initPayPalButton();
          </script>    
        <div class="container">
            <footer class="footer">
                <a href="/paginas/index.html" class="brand"><img src="/imagens/zoologo.svg" alt="logo"></a>
                <ul class="menu2">
                    <li><a href="/paginas/index.html">Início</a></li>
                    <li><a href="/paginas/animais.html">Animais</a></li>
                    <li><a href="/paginas/marcacoes.html">Marcações</a></li>
                    <li><a href="/paginas/sobre.html">Sobre Nós</a></li>
                    <li><a href="/paginas/contactos.html">Contactos</a></li>
                </ul>
            </footer>        
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>  
        <script>
            $(function(){
                $(".toggle").on("click", function(){
                    if($(".menu").hasClass("active")){
                        $(".menu").removeClass("active");
                        $(this).find("a").html("<ion-icon name='menu-outline'></ion-icon>");
                    } else{
                        $(".menu").addClass("active");
                        $(this).find("a").html("<ion-icon name='close-outline'></ion-icon>");
                    }
                });
            });
        </script> 
        <script src="/js/main.js"></script>
    </body>
</html>